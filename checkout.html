<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Оформление покупки — AutoSale</title>
  <style>
    /* СБРОС */
    * { margin:0; padding:0; box-sizing:border-box; }
    /* ПЕРЕМЕННЫЕ */
    :root {
      --main-bg:#121212;
      --secondary-bg:#1e1e1e;
      --accent-color:#ff5722;
      --accent-hover:#e64a19;
      --text-color:#ffffff;
      --subtext-color:#cccccc;
      --shadow-color:rgba(0,0,0,0.3);
    }
    body {
      background:var(--main-bg);
      color:var(--text-color);
      font-family:Arial,sans-serif;
      min-height:100vh;
      overflow-x:hidden;
      display:flex;
      flex-direction:column;
      transition:background 0.3s,color 0.3s;
    }
    body.light-theme {
      --main-bg:#f5f5f5;
      --secondary-bg:#ffffff;
      --text-color:#222;
      --subtext-color:#555;
      --shadow-color:rgba(0,0,0,0.1);
    }
    a { text-decoration:none; color:inherit; }

    .nav-bar {
      display:flex; justify-content:space-between; align-items:center;
      padding:1rem 2rem; background:var(--secondary-bg); box-shadow:0 2px 5px var(--shadow-color);
      position:sticky; top:0; z-index:100;
    }
    .nav-bar h2 {
      font-size:1.5rem; cursor:pointer; transition: color 0.3s;
    }
    .nav-bar h2:hover {
      color:var(--accent-color);
    }
    .nav-links a {
      margin:0 1rem; font-size:1rem; transition: color 0.3s;
    }
    .nav-links a:hover {
      color:var(--accent-color);
    }
    .theme-toggle {
      background:#333; color:#fff; border:none; padding:0.4rem 0.8rem; border-radius:4px; margin-left:1rem; transition: background 0.3s;
      cursor:pointer;
    }
    .theme-toggle:hover {
      background:var(--accent-color);
    }

    .checkout-container {
      max-width:600px; margin:2rem auto; padding:1rem;
      background:var(--secondary-bg);
      border-radius:8px;
      box-shadow:0 4px 10px var(--shadow-color);
      animation:fadeIn 0.8s forwards;
      transform:translateY(20px);
      opacity:0;
    }
    @keyframes fadeIn {
      to {
        transform:translateY(0);
        opacity:1;
      }
    }

    h1 {
      text-align:center; margin-bottom:1rem;
    }

    .progress-bar {
      display:flex; justify-content:space-between; margin-bottom:2rem;
    }
    .progress-bar div {
      width:25%; text-align:center; color:var(--subtext-color); position:relative;
    }

    .step {
      display:none;
    }
    .step.active {
      display:block;
    }
    label { display:block; margin-bottom:0.5rem; font-weight:bold; }
    select {
      width:100%; padding:0.5rem; background:#2a2a2a; border:1px solid #555; border-radius:4px; color:#fff; margin-bottom:1rem;
    }
    input[type="radio"] { margin-bottom:1rem; }

    .btn {
      background:var(--accent-color);
      color:var(--text-color);
      border:none;
      padding:0.75rem 1.5rem;
      border-radius:4px;
      cursor:pointer;
      transition: background 0.3s;
    }
    .btn:hover {
      background:var(--accent-hover);
    }

    #orderSummary {
      background:#2a2a2a;
      border-radius:4px;
      padding:1rem; margin-top:1rem;
    }

    footer {
      background:#181818; color:#aaaaaa; text-align:center; padding:1rem; margin-top:auto;
    }
  </style>
</head>
<body>

<div class="nav-bar">
  <h2 onclick="location.href='index.html'">AutoSale</h2>
  <div class="nav-links">
    <a href="catalog.html">Каталог</a>
    <a href="contact.html">Контакты</a>
    <a href="login.html">Войти</a>
    <a href="register.html">Регистрация</a>
    <a href="checkout.html">Оформление</a>
    <button class="theme-toggle" onclick="toggleTheme()">Тема</button>
  </div>
</div>

<div class="checkout-container">
  <h1>Оформление покупки</h1>

  <div class="progress-bar">
    <div id="stepLabel1">Город</div>
    <div id="stepLabel2">Доставка</div>
    <div id="stepLabel3">Оплата</div>
    <div id="stepLabel4">Подтверждение</div>
  </div>

  <form id="checkoutForm" onsubmit="event.preventDefault(); submitOrder();">
    <!-- 1) Город -->
    <div class="step active" id="step1">
      <label for="citySelect">Выберите ваш город:</label>
      <select id="citySelect">
        <option value="">-- Выберите город --</option>
        <option value="Москва">Москва</option>
        <option value="Санкт-Петербург">Санкт-Петербург</option>
        <option value="Казань">Казань</option>
        <option value="Новосибирск">Новосибирск</option>
        <option value="Екатеринбург">Екатеринбург</option>
      </select>
    </div>

    <!-- 2) Доставка -->
    <div class="step" id="step2">
      <p style="margin-bottom:0.5rem;font-weight:bold;">Выберите способ доставки:</p>
      <div>
        <label><input type="radio" name="delivery" value="Самовывоз"/> Самовывоз из салона</label><br/>
        <label><input type="radio" name="delivery" value="Доставка до дома"/> Доставка до дома</label>
      </div>
    </div>

    <!-- 3) Оплата -->
    <div class="step" id="step3">
      <p style="margin-bottom:0.5rem;font-weight:bold;">Выберите способ оплаты:</p>
      <div>
        <label><input type="radio" name="payment" value="Наличные"/> Наличные</label><br/>
        <label><input type="radio" name="payment" value="Карта"/> Банковская карта</label><br/>
        <label><input type="radio" name="payment" value="Кредит/Рассрочка"/> Кредит/Рассрочка</label>
      </div>
    </div>

    <!-- 4) Подтверждение -->
    <div class="step" id="step4">
      <h3>Подтверждение заказа</h3>
      <div id="orderSummary"></div>
      <p style="margin-top:1rem;">Нажмите «Отправить», чтобы завершить покупку.</p>
    </div>

    <div style="display:flex; justify-content:space-between; margin-top:2rem;">
      <button class="btn" type="button" id="prevBtn" onclick="changeStep(-1)" style="display:none;">Назад</button>
      <button class="btn" type="button" id="nextBtn" onclick="changeStep(1)">Далее</button>
    </div>
  </form>
</div>

<footer>
  <p>© 2025 Авто-Сервис | Все права защищены</p>
</footer>

<script>
  let currentStep=1; 
  const totalSteps=4;
  const citySelect=document.getElementById('citySelect');
  const deliveryRadios=document.getElementsByName('delivery');
  const paymentRadios=document.getElementsByName('payment');
  const orderSummary=document.getElementById('orderSummary');

  function showStep(step){
    for(let i=1;i<=totalSteps;i++){
      document.getElementById('step'+i).style.display='none';
      document.getElementById('stepLabel'+i).style.color='var(--subtext-color)';
    }
    document.getElementById('step'+step).style.display='block';
    document.getElementById('stepLabel'+step).style.color='#fff';

    const prevBtn=document.getElementById('prevBtn');
    const nextBtn=document.getElementById('nextBtn');
    prevBtn.style.display=(step===1)?'none':'inline-block';
    nextBtn.textContent=(step===totalSteps)?'Отправить':'Далее';
  }
  function changeStep(n){
    if(n===1 && currentStep===totalSteps){
      submitOrder(); return;
    }
    currentStep+=n;
    if(currentStep<1) currentStep=1;
    if(currentStep>totalSteps) currentStep=totalSteps;
    showStep(currentStep);
    updateSummary();
  }

  function updateSummary(){
    const city=citySelect.value||"не выбран";
    let delivery="не выбрано";
    let payment="не выбрано";
    deliveryRadios.forEach(r=>{if(r.checked)delivery=r.value;});
    paymentRadios.forEach(r=>{if(r.checked)payment=r.value;});
    orderSummary.innerHTML=`
      <p><strong>Город:</strong> ${city}</p>
      <p><strong>Доставка:</strong> ${delivery}</p>
      <p><strong>Оплата:</strong> ${payment}</p>
    `;
  }

  function submitOrder(){
    const city=citySelect.value||"не выбран";
    let delivery="не выбрано";
    let payment="не выбрано";
    deliveryRadios.forEach(r=>{if(r.checked)delivery=r.value;});
    paymentRadios.forEach(r=>{if(r.checked)payment=r.value;});

    alert(`Заказ оформлен!\nГород: ${city}\nДоставка: ${delivery}\nОплата: ${payment}`);
    location.href="index.html";
  }

  showStep(currentStep);

  function applyTheme(isLight){
    if(isLight) document.body.classList.add('light-theme');
    else document.body.classList.remove('light-theme');
  }
  function toggleTheme(){
    const isLight=document.body.classList.contains('light-theme');
    localStorage.setItem('siteTheme',isLight?'dark':'light');
    applyTheme(!isLight);
  }
  const savedTheme=localStorage.getItem('siteTheme');
  applyTheme(savedTheme==='light');
</script>

</body>
</html>
